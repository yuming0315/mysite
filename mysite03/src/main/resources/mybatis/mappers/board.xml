<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="board">
	<select id="findByPageAndKeyWord" parameterType="map">
	<![CDATA[
	select *
	 from board
	 where title like '%${keyword }%' or contents like '%${keyword }%'
	 limit #{page}
	]]>
	</select>
	<!-- 위에 keyword는 넘겨줄 때 문자열에 % 붙여서 넘기기 아니면 위의방식 limit #{} 계산못함 계산 해서 넘겨줘야함 -->

	<select id="getTotalCount" parameterType="string">
		<choose>
			<when test='_parameter =="" or _parameter == null'>
			<![CDATA[
			select count(*)
			 from board
			 	]]>
			</when>
			<otherwise>
		<![CDATA[
		select count(*)
			 from board
			 where title like '%${_parameter }%'
			 	or contents like '%${_parameter }%'
			 		]]>
			</otherwise>
		</choose>
	</select>
</mapper>
